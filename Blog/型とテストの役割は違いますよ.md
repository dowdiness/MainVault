---
aliases: [型に出来ること]
created: 2024-10-27T11:34:40+09:00
modified: 2025-04-29T20:09:57+09:00
---

型とテストの役割は違いますよ

テストを書いているから型はなくても困らない、もしくは型があるからテストはなくても良いみたいな主張があります。

役割や出来ることが違うので

エッジケースや

プログラムの意図や仕様を表現するのが

# 型に出来ること

まず初めに知ってもらいたいことは型システムは[形式手法(formal methods)](https://ja.wikipedia.org/wiki/%E5%BD%A2%E5%BC%8F%E6%89%8B%E6%B3%95) の一種であり論理学や数学の理論が背景にある技術だということです。証明を目的にした手法だと思ってください。

きちんと定義された前提や仮定を元にして

曖昧な定義や許さずに

論理学では真または偽の性質を表した文のことを命題と呼びます。

"Propositions as Types" 

型が強くなればなるほど、表現力が低くなっていく傾向があります。

あまり深堀りすると言語哲学や数学の哲学の領域になると思うので
## 苦手なこと

型の品質が高い低いみたいな話は基本的には起こらないと思います。

型が付いてコンパイルが通るというだけで安心感があります。

また同じ型と言っても、定理証明支援系のように型による命題の定義とその型に沿ったプログラムによる証明が出来る高度なものから、C言語のように型がメモリの使用量を表しているだけのものなど、型システムによって型の出来ることはかなり幅があります。


# テストに出来ること

代表的なケースを選んでテストする

型では保証できない振る舞いとは実行時に決定する挙動のことでしょうか？
エフェクトシステムや動的な型チェックは型システムとは関係ないということでしょうか？

`TypeScript` にはランタイム型チェックはありませんよ。JavaScriptのinstanceofなどのことでしょうか？
またすべての実行時の振る舞いを完全に保証することはテストでも困難ではないですか？型でもテストでも出来ない気がしますが実現する方法があれば教えてください。

定理証明は型システムの一種だと思うのですが、定理証明に実現出来ることが何故型では実現できないのですが？

定理証明は型システムですか？またそうでない場合型システムとは何を意味していますか？これらの用語の定義は明確ですか？これから使う言葉では全てここをはっきり明確にして曖昧さを全て排除した文章だけ使ってください。

---

# 型とテストの役割の違い

プログラムにおいて「型」と「テスト」はどちらもバグを減らし、コードの品質を向上させるための手段ですが、それぞれの役割やできることは異なります。

よくある主張として、「テストを書いているから型はなくても困らない」または「型があるからテストは不要」といったものがあります。しかし、型とテストは補完し合うものであり、一方が他方の完全な代替になるわけではありません。

以下、それぞれの役割について詳しく見ていきましょう。

---

# 型にできること

まず知っておくべきなのは、型システムは[形式手法（formal methods）](https://ja.wikipedia.org/wiki/%E5%BD%A2%E5%BC%8F%E6%89%8B%E6%B3%95)の一種であり、論理学や数学の理論が背景にある技術だということです。型システムは、プログラムの正しさを論理的に証明するための手段として活用されます。

## 型の特徴

- **プログラムの意図や仕様を明確に表現できる**
    - 型によって、関数の引数や戻り値のデータ型を明確に定義できるため、誤った値が渡されるのを防ぐことができます。
- **エッジケースを防ぐための制約を定義できる**
    - 例えば、整数型の変数には文字列を入れられないなど、型による制約が不正な値の混入を防ぎます。
- **曖昧な定義を排除し、厳密な仕様を実現できる**
    - 型を利用することで、事前に決められたルールに沿ってコードを書くことが求められ、意図しない動作を減らせます。
- **コンパイル時にバグを発見できる**
    - 型エラーがあればコンパイル時に検出されるため、実行する前に問題を発見しやすくなります。

## 型の限界

- **型が強くなるほど表現力が制限される**
    - より厳密な型システムを持つ言語ほど、柔軟性が低下し、開発者が書けるコードの自由度が減る傾向があります。
- **型の品質に優劣はあまりない**
    - 「良い型」「悪い型」というよりは、型システムの設計思想の違いによって制約や表現力が異なります。
- **型システムには幅広い種類がある**
    - 例えば、HaskellやRustのように厳格な型システムを持つ言語もあれば、C言語のように型が主にメモリ管理のために使われるものもあります。

---

# テストにできること

テストは、プログラムの動作が期待通りであることを確認する手段です。型がある程度の安全性を保証する一方で、テストはより具体的な動作検証に役立ちます。

## テストの特徴

- **エッジケースの検証ができる**
    - 型システムでは防げない異常系（例: 0での除算、ネットワークエラーなど）をテストでカバーできます。
- **実際のプログラムの動作を確認できる**
    - 仕様通りに動作しているか、具体的な出力結果を検証できます。
- **アドホックなケースにも対応できる**
    - 型だけでは定義しづらい複雑な条件や例外処理（例えば、外部APIからの予期しないレスポンスや、特定のユーザー入力による予測不能な動作など）をテストによって確認できます。

## テストの限界

- **テストが通っていても完全な正しさは保証できない**
    - テストがカバーしていない部分にバグが潜んでいる可能性があります。
- **テストしていない部分の動作は保証できない**
    - すべてのパターンをテストできるわけではなく、テストが漏れている部分に問題が発生する可能性があります。

---

# 型とテストを組み合わせる重要性

型とテストは、それぞれ異なる役割を果たします。

- 型は **コンパイル時に誤りを防ぐ** ことで、安全性を向上させます。
- テストは **実行時の動作を確認する** ことで、期待通りの挙動を保証します。

そのため、型があるからテストが不要になるわけではなく、逆にテストがあるから型が不要になるわけでもありません。両者を適切に組み合わせることで、より堅牢なプログラムを実現できます。